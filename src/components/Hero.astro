---
import { getCollection } from 'astro:content';

const heroEntries = await getCollection('hero');
const heroData = heroEntries[0]?.data;
const role = heroData?.role ?? 'Developer';
const bio = heroData?.bio ?? '';
const skills = heroData?.skills ?? {};
const username = heroData?.username ?? 'user';
const hostname = heroData?.hostname ?? 'portfolio';
---

<section class="pt-8" id="about">
  <div class="w-full max-w-4xl mx-auto rounded-lg overflow-hidden border border-ide-border bg-[#010409] shadow-2xl animate-reveal">
    <!-- Terminal Header -->
    <div class="bg-ide-gray px-4 py-3 flex items-center gap-2 border-b border-ide-border">
      <div class="terminal-dot bg-[#ff5f56]"></div>
      <div class="terminal-dot bg-[#ffbd2e]"></div>
      <div class="terminal-dot bg-[#27c93f]"></div>
      <div class="ml-4 text-xs font-mono text-gray-400 flex items-center gap-2">
        <span class="material-symbols-outlined text-sm">folder</span>
        ~/{username}/{hostname}
      </div>
    </div>
    <!-- Terminal Content -->
    <div class="p-6 font-mono text-sm md:text-base leading-relaxed">
      <!-- whoami -->
      <div class="flex gap-3">
        <span class="text-primary">➜</span>
        <span class="text-gray-100">whoami</span>
      </div>
      <div class="mt-2 text-accent-green font-bold text-lg md:text-xl">
        {role}
      </div>

      <!-- grep skills -->
      <div class="flex gap-3 mt-6">
        <span class="text-primary">➜</span>
        <span class="text-gray-100">cat skills.json</span>
      </div>
      <div class="mt-2 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-1 text-gray-300">
        {Object.entries(skills).map(([key, values]) => (
          <div>
            <span class="text-syntax-keyword">{key}:</span> [{(values as string[]).map((v: string, i: number) => (
              <><span class="text-syntax-string">"{v}"</span>{i < (values as string[]).length - 1 ? ', ' : ''}</>
            ))}]
          </div>
        ))}
      </div>

      <!-- python3 info.py -->
      <div class="flex gap-3 mt-6">
        <span class="text-primary">➜</span>
        <span class="text-gray-100">python3 info.py</span>
      </div>
      <div class="mt-2 text-gray-400 italic whitespace-pre-line">
        """<br/>
        {bio}<br/>
        """
      </div>

      <!-- Blinking cursor -->
      <div class="mt-4 flex items-center gap-1">
        <span class="text-gray-100">_</span>
        <span class="w-2 h-5 bg-primary cursor-blink"></span>
      </div>
    </div>
  </div>
</section>
